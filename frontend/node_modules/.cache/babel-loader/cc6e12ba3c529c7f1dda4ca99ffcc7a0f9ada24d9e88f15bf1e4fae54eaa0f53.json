{"ast":null,"code":"// frontend/src/pages/LoginRegister.js\nimport React,{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{useSocket}from'../contexts/SocketContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginRegister(){const[isRegister,setIsRegister]=useState(false);const[form,setForm]=useState({username:'',email:'',password:''});const navigate=useNavigate();const{socket}=useSocket();const toggleForm=()=>{setIsRegister(!isRegister);};const handleChange=e=>{setForm({...form,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();try{if(isRegister){await axios.post('http://localhost:5000/api/users/register',form);alert('Registration successful. Please login.');setIsRegister(false);}else{const res=await axios.post('http://localhost:5000/api/users/login',form);if(res.data.message==='Login successful'){localStorage.setItem('username',res.data.username);if(socket){socket.emit('userOnline',res.data.username);}navigate('/dashboard');}}}catch(error){alert(error.response.data.message||'Error occurred');}};return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-screen bg-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-96 p-8 bg-white rounded shadow\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl mb-4 text-center\",children:isRegister?'Register':'Login'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block mb-1\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",value:form.username,onChange:handleChange,required:true,className:\"w-full px-3 py-2 border rounded\"})]}),isRegister&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block mb-1\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:form.email,onChange:handleChange,required:true,className:\"w-full px-3 py-2 border rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block mb-1\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:form.password,onChange:handleChange,required:true,className:\"w-full px-3 py-2 border rounded\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full py-2 bg-blue-500 text-white rounded\",children:isRegister?'Register':'Login'})]}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleForm,className:\"mt-4 text-blue-500 hover:underline w-full\",children:isRegister?'Already have an account? Login':'New user? Register'})]})});}export default LoginRegister;","map":{"version":3,"names":["React","useState","axios","useNavigate","useSocket","jsx","_jsx","jsxs","_jsxs","LoginRegister","isRegister","setIsRegister","form","setForm","username","email","password","navigate","socket","toggleForm","handleChange","e","target","name","value","handleSubmit","preventDefault","post","alert","res","data","message","localStorage","setItem","emit","error","response","className","children","onSubmit","type","onChange","required","onClick"],"sources":["C:/Users/critis1/Desktop/Projects/ad_hoc/adhoc_final/frontend/src/pages/LoginRegister.js"],"sourcesContent":["// frontend/src/pages/LoginRegister.js\r\nimport React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useSocket } from '../contexts/SocketContext';\r\n\r\nfunction LoginRegister() {\r\n    const [isRegister, setIsRegister] = useState(false);\r\n    const [form, setForm] = useState({ username: '', email: '', password: '' });\r\n    const navigate = useNavigate();\r\n    const { socket } = useSocket();\r\n\r\n    const toggleForm = () => {\r\n        setIsRegister(!isRegister);\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        setForm({ ...form, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            if (isRegister) {\r\n                await axios.post('http://localhost:5000/api/users/register', form);\r\n                alert('Registration successful. Please login.');\r\n                setIsRegister(false);\r\n            } else {\r\n                const res = await axios.post('http://localhost:5000/api/users/login', form);\r\n                if (res.data.message === 'Login successful') {\r\n                    localStorage.setItem('username', res.data.username);\r\n                    if (socket) {\r\n                        socket.emit('userOnline', res.data.username);\r\n                    }\r\n                    navigate('/dashboard');\r\n                }\r\n            }\r\n        } catch (error) {\r\n            alert(error.response.data.message || 'Error occurred');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex items-center justify-center h-screen bg-gray-100\">\r\n            <div className=\"w-96 p-8 bg-white rounded shadow\">\r\n                <h2 className=\"text-2xl mb-4 text-center\">{isRegister ? 'Register' : 'Login'}</h2>\r\n                <form onSubmit={handleSubmit}>\r\n                    <div className=\"mb-4\">\r\n                        <label className=\"block mb-1\">Username</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"username\"\r\n                            value={form.username}\r\n                            onChange={handleChange}\r\n                            required\r\n                            className=\"w-full px-3 py-2 border rounded\"\r\n                        />\r\n                    </div>\r\n                    {isRegister && (\r\n                        <div className=\"mb-4\">\r\n                            <label className=\"block mb-1\">Email</label>\r\n                            <input\r\n                                type=\"email\"\r\n                                name=\"email\"\r\n                                value={form.email}\r\n                                onChange={handleChange}\r\n                                required\r\n                                className=\"w-full px-3 py-2 border rounded\"\r\n                            />\r\n                        </div>\r\n                    )}\r\n                    <div className=\"mb-4\">\r\n                        <label className=\"block mb-1\">Password</label>\r\n                        <input\r\n                            type=\"password\"\r\n                            name=\"password\"\r\n                            value={form.password}\r\n                            onChange={handleChange}\r\n                            required\r\n                            className=\"w-full px-3 py-2 border rounded\"\r\n                        />\r\n                    </div>\r\n                    <button\r\n                        type=\"submit\"\r\n                        className=\"w-full py-2 bg-blue-500 text-white rounded\"\r\n                    >\r\n                        {isRegister ? 'Register' : 'Login'}\r\n                    </button>\r\n                </form>\r\n                <button\r\n                    onClick={toggleForm}\r\n                    className=\"mt-4 text-blue-500 hover:underline w-full\"\r\n                >\r\n                    {isRegister ? 'Already have an account? Login' : 'New user? Register'}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LoginRegister;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}