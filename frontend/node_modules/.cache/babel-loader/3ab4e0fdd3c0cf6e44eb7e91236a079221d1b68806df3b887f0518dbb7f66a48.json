{"ast":null,"code":"// frontend/src/pages/MyListings.js\nimport React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MyListings(){const username=localStorage.getItem('username');const[listings,setListings]=useState([]);const[products,setProducts]=useState([]);const[form,setForm]=useState({product:'',price:'',description:'',shippingOptions:'STANDARD'});useEffect(()=>{fetchListings();fetchProducts();},[]);const fetchListings=async()=>{const res=await axios.get('http://localhost:5000/api/trade-listings');const myListings=res.data.filter(listing=>listing.postedBy===username);setListings(myListings);};const fetchProducts=async()=>{const res=await axios.get('http://localhost:5000/api/products');const myProducts=res.data.filter(product=>product.offeredBy===username);setProducts(myProducts);};const handleChange=e=>{setForm({...form,[e.target.name]:e.target.value});};const handleAddListing=async e=>{e.preventDefault();try{await axios.post('http://localhost:5000/api/trade-listings',{...form,postedBy:username});fetchListings();setForm({product:'',price:'',description:'',shippingOptions:'STANDARD'});}catch(error){alert('Error adding listing');}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl mb-4\",children:\"My Trade Listings\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleAddListing,className:\"mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-2\",children:[/*#__PURE__*/_jsxs(\"select\",{name:\"product\",value:form.product,onChange:handleChange,required:true,className:\"px-3 py-2 border rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Product\"}),products.map(prod=>/*#__PURE__*/_jsx(\"option\",{value:prod.name,children:prod.name},prod._id))]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"price\",value:form.price,onChange:handleChange,placeholder:\"Price\",required:true,className:\"px-3 py-2 border rounded\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:form.description,onChange:handleChange,placeholder:\"Description\",className:\"px-3 py-2 border rounded\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"shippingOptions\",value:form.shippingOptions,onChange:handleChange,required:true,className:\"px-3 py-2 border rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"STANDARD\",children:\"Standard\"}),/*#__PURE__*/_jsx(\"option\",{value:\"EXPRESS\",children:\"Express\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PICKUP\",children:\"Pickup\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-blue-500 text-white rounded\",children:\"Add Listing\"})]})}),/*#__PURE__*/_jsxs(\"table\",{className:\"w-full table-auto\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-300\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"Shipping\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:listings.map(listing=>/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"border px-4 py-2\",children:listing.product}),/*#__PURE__*/_jsx(\"td\",{className:\"border px-4 py-2\",children:listing.price}),/*#__PURE__*/_jsx(\"td\",{className:\"border px-4 py-2\",children:listing.shippingOptions}),/*#__PURE__*/_jsx(\"td\",{className:\"border px-4 py-2\",children:listing.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border px-4 py-2\",children:/*#__PURE__*/_jsx(\"button\",{className:\"px-2 py-1 bg-red-500 text-white rounded\",children:\"Delete\"})})]},listing._id))})]})]});}export default MyListings;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","MyListings","username","localStorage","getItem","listings","setListings","products","setProducts","form","setForm","product","price","description","shippingOptions","fetchListings","fetchProducts","res","get","myListings","data","filter","listing","postedBy","myProducts","offeredBy","handleChange","e","target","name","value","handleAddListing","preventDefault","post","error","alert","children","className","onSubmit","onChange","required","map","prod","_id","type","placeholder"],"sources":["C:/Users/critis1/Desktop/Projects/ad_hoc/adhoc_final/frontend/src/pages/MyListings.js"],"sourcesContent":["// frontend/src/pages/MyListings.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction MyListings() {\r\n  const username = localStorage.getItem('username');\r\n  const [listings, setListings] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [form, setForm] = useState({ product: '', price: '', description: '', shippingOptions: 'STANDARD' });\r\n\r\n  useEffect(() => {\r\n    fetchListings();\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  const fetchListings = async () => {\r\n    const res = await axios.get('http://localhost:5000/api/trade-listings');\r\n    const myListings = res.data.filter(listing => listing.postedBy === username);\r\n    setListings(myListings);\r\n  };\r\n\r\n  const fetchProducts = async () => {\r\n    const res = await axios.get('http://localhost:5000/api/products');\r\n    const myProducts = res.data.filter(product => product.offeredBy === username);\r\n    setProducts(myProducts);\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setForm({...form, [e.target.name]: e.target.value});\r\n  };\r\n\r\n  const handleAddListing = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await axios.post('http://localhost:5000/api/trade-listings', { ...form, postedBy: username });\r\n      fetchListings();\r\n      setForm({ product: '', price: '', description: '', shippingOptions: 'STANDARD' });\r\n    } catch (error) {\r\n      alert('Error adding listing');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"text-xl mb-4\">My Trade Listings</h2>\r\n      {/* Add Trade Listing Form */}\r\n      <form onSubmit={handleAddListing} className=\"mb-6\">\r\n        <div className=\"flex flex-col space-y-2\">\r\n          <select \r\n            name=\"product\" \r\n            value={form.product} \r\n            onChange={handleChange}\r\n            required \r\n            className=\"px-3 py-2 border rounded\"\r\n          >\r\n            <option value=\"\">Select Product</option>\r\n            {products.map(prod => (\r\n              <option key={prod._id} value={prod.name}>{prod.name}</option>\r\n            ))}\r\n          </select>\r\n          <input \r\n            type=\"number\" \r\n            name=\"price\" \r\n            value={form.price} \r\n            onChange={handleChange}\r\n            placeholder=\"Price\" \r\n            required \r\n            className=\"px-3 py-2 border rounded\"\r\n          />\r\n          <textarea \r\n            name=\"description\" \r\n            value={form.description} \r\n            onChange={handleChange}\r\n            placeholder=\"Description\" \r\n            className=\"px-3 py-2 border rounded\"\r\n          />\r\n          <select \r\n            name=\"shippingOptions\" \r\n            value={form.shippingOptions} \r\n            onChange={handleChange}\r\n            required \r\n            className=\"px-3 py-2 border rounded\"\r\n          >\r\n            <option value=\"STANDARD\">Standard</option>\r\n            <option value=\"EXPRESS\">Express</option>\r\n            <option value=\"PICKUP\">Pickup</option>\r\n          </select>\r\n          <button type=\"submit\" className=\"px-4 py-2 bg-blue-500 text-white rounded\">Add Listing</button>\r\n        </div>\r\n      </form>\r\n\r\n      {/* List of Listings */}\r\n      <table className=\"w-full table-auto\">\r\n        <thead>\r\n          <tr className=\"bg-gray-300\">\r\n            <th className=\"px-4 py-2\">Product</th>\r\n            <th className=\"px-4 py-2\">Price</th>\r\n            <th className=\"px-4 py-2\">Shipping</th>\r\n            <th className=\"px-4 py-2\">Description</th>\r\n            <th className=\"px-4 py-2\">Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {listings.map(listing => (\r\n            <tr key={listing._id} className=\"text-center\">\r\n              <td className=\"border px-4 py-2\">{listing.product}</td>\r\n              <td className=\"border px-4 py-2\">{listing.price}</td>\r\n              <td className=\"border px-4 py-2\">{listing.shippingOptions}</td>\r\n              <td className=\"border px-4 py-2\">{listing.description}</td>\r\n              <td className=\"border px-4 py-2\">\r\n                {/* Implement Edit/Delete as needed */}\r\n                <button className=\"px-2 py-1 bg-red-500 text-white rounded\">Delete</button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MyListings;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}